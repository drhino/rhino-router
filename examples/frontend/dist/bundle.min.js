!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RhinoFrontend={})}(this,(function(e){"use strict";let t=[];const r=e=>{if(void 0===e.route)throw new Error("RR0100: `route` key required");if(e.vars)throw new Error("RR0202: do not use `vars` key");t.push({input:e,...o(e.route)})},o=e=>{let t=[];if(e.includes("{")){const r=e.matchAll(/\{([^:}]*)(?::([^}]*))?\}/g);for(const o of r){const r="("+(o[2]||"[^/]+")+")";e=e.replace(o[0],r),t.push(o[1])}e="^"+e+"$"}return{pattern:e,placeholders:t}},n=(e,t,r)=>{let o,n={};const l=t.length;if(l){if(o=r.match(e),null===o)return!1}else if(r!==e)return!1;if(o)for(let e=0;e<l;)n[t[e++]]=o[e];return n};let l,i,c;const s=async e=>{const{vars:r,controller:o}=(e=>{for(const r of t){const t=n(r.pattern,r.placeholders,e);if(!1!==t)return{...r.input,vars:t}}return!1})(e),{handle:c}=await f(o),s=c(r);l.querySelectorAll(i).forEach((e=>e.removeEventListener("onclick",a))),l.innerHTML=await s,l.querySelectorAll(i).forEach((e=>e.onclick=a))},a=e=>{e.preventDefault();const t=e.target.getAttribute("href");history.pushState({},"",c+t),s(t)},f=async e=>{if(!u[e]){const{default:t}=await import(c+"/controllers/"+e);u[e]=t}return u[e]};let u={};e.init=async(e,t,o)=>{if(i)throw new Error("Already initiated.");i="a["+t+"]",c=o;let n=await fetch(c+"/routes.json");n=await n.json();for(const e of n)r(e);let f=window.location.pathname;c&&(f=f.substr(c.length)),l=document.getElementById(e),document.querySelectorAll(i).forEach((e=>e.onclick=a)),s(f)},Object.defineProperty(e,"__esModule",{value:!0})}));